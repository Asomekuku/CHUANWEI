"use strict";var _createClass=function(){function s(n,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,i,e){return i&&s(n.prototype,i),e&&s(n,e),n}}();function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var Index=function(){function n(){_classCallCheck(this,n),this.dataId,this.topwrap=document.getElementsByClassName("topwrap"),this.shousuobig=document.querySelector(".shousuobig"),this.banner=document.querySelector(".banner"),this.daohan=document.getElementById("daohan"),this.daohanNeir=document.getElementById("daohan_neir"),this.bannerOne=document.querySelector(".banner_one"),this.bannerLis=this.bannerOne.getElementsByTagName("li"),this.bannerPai=document.querySelector(".banner_pai"),this.spans=this.bannerPai.children,this.bannerPrev=document.querySelector(".banner_prev"),this.bannerNext=document.querySelector(".banner_next"),this.index=0,this.lastindex=0,this.ismove=!0,this.timer=null,this.width=this.bannerLis[0].children[0].offsetWidth,this.rexiao=document.getElementById("rexiao"),this.main=document.querySelector(".main"),this.num=1,this.shopName=["电视","盒子/投影仪","冰箱","洗衣机","耳机","音响","显示器"],this.yitijbox=$(".yitibox"),this.vidoArr=[{img:"imgs/saml/video-1.png",text:"创维 创导未来"},{img:"imgs/saml/video-2.png",text:"防蓝光护眼"},{img:"imgs/saml/video-3.png",text:"AIOT物物互联"},{img:"imgs/saml/video-4.png",text:"H90高端旗舰系列"}],this.scrollfixed(),this.addDaoHan(),this.banNer(),this.prevClick(),this.btnClick(),this.nextClick(),this.autoPlay(),this.autoDie(),this.out(),this.getPhp(),this.yiTiJi(),this.signpwd()}return _createClass(n,[{key:"signpwd",value:function(){var n=utils.getCookie("name");$(".header").html('\n            \x3c!-- 头部登陆注册 --\x3e\n            <div class="header_a banx">\n                \x3c!-- 欢迎来到官方商城 --\x3e\n                <div class="head_welcome">欢迎您，来到创维官方商城</div>\n                \x3c!-- 登录注册 --\x3e\n                <ul class="hade_right right">\n                    <li>\n                        <a href="./html/sign.html" class=\'sign\'>登录</a>\n                        <a href="javascript:;" class=\'sign1\'>欢迎您 '+n+'</a>\n                    </li>\n                    <li>\n                        <a href="./html/zhuce.html" class=\'zc\'>注册</a>\n                        <a href="javascript:;" class=\'zc1\'>退出</a>\n                    </li>\n                    <li><a href="javascript:;">我的订单</a></li>\n                    <li><a href="javascript:;" class="a">手机端</a></li>\n                </ul>\n            </div>\n        '),n?($(".sign1").css({display:"block",color:"red"}),$(".zc1").css("display","block"),$(".sign").css("display","none"),$(".zc").css("display","none")):($(".sign1").css("display","none"),$(".zc1").css("display","none"),$(".sign").css("display","block"),$(".zc").css("display","block")),$(".zc1").click(function(){$(".sign1").css("display","none"),$(".zc1").css("display","none"),$(".sign").css("display","block"),$(".zc").css("display","block"),utils.setCookie("name","",{expires:-1,path:"/"})})}},{key:"scrollfixed",value:function(){var n=this;document.onscroll=function(){90<(document.body.scrollTop||document.documentElement.scrollTop)?(n.shousuobig.classList.add("fixed"),$(".floatNav_a3").css("display","block")):(n.shousuobig.classList.remove("fixed"),$(".floatNav_a3").css("display","none"))},$(".floatNav_a3").click(function(){return $("body,html").animate({scrollTop:0},500),!1}),$(".wrap_gouwu").click(function(){window.open("./html/gouwuche.html")})}},{key:"addDaoHan",value:function(){var o=this;utils.post("./js/shuju.json",{},function(t){for(var n in t){var i=document.createElement("li");i.className=n+"1",i.style.cursor="pointer",i.innerHTML="<a>"+t[n].name+'</a> <i class="iconfont icon-right"></i>',o.daohan.appendChild(i)}var e=o.daohan.children;Array.from(e).forEach(function(s,a){s.addEventListener("mouseover",function(){for(var n in o.daohanNeir.style.display="block",s.classList.add("daoColor"),t)if(t[n].id==a+1){o.daohanNeir.innerHTML="";for(var i=0;i<t[n].data.length;i++){var e=document.createElement("li");e.innerHTML='<a href="#">'+t[n].data[i]+"</a>",o.daohanNeir.appendChild(e)}}}),s.addEventListener("mouseout",function(){o.daohanNeir.style.display="none",s.classList.remove("daoColor")})})}),this.daohanNeir.onmouseover=function(){this.style.display="block"},this.daohanNeir.onmouseout=function(){this.style.display="none"},$(".daohan").on("click","li",function(){window.open("./html/liebiao.html")}),$("#daohan_neir").on("click","li",function(){window.open("./html/liebiao.html")})}},{key:"banNer",value:function(){this.bannerOne.appendChild(this.bannerLis[0].cloneNode(!0)),this.bannerOne.style.width=1532*this.bannerLis.length+"px";for(var n=0;n<this.bannerLis.length-1;n++){var i=document.createElement("span");0==n&&i.classList.add("active"),this.bannerPai.appendChild(i),this.bannerPai.style.marginLeft=-this.bannerPai.offsetWidth/2+"px"}}},{key:"prevFn",value:function(){var n=this;this.ismove&&(this.ismove=!1,this.lastindex=this.index,this.index++,this.index==this.bannerLis.length-1?(this.index=0,utils.move(this.bannerOne,"left",""+-(this.bannerLis.length-1)*this.width,1e3,function(){n.bannerOne.style.left="0px",n.ismove=!0})):utils.move(this.bannerOne,"left",""+-this.index*this.width,1e3,function(){n.ismove=!0}),this.spans[this.lastindex].classList.remove("active"),this.spans[this.index].classList.add("active"))}},{key:"prevClick",value:function(){var n=this;this.bannerNext.addEventListener("click",function(){n.prevFn()})}},{key:"btnClick",value:function(){var e=this,s=this.bannerPai.children;Array.from(s).forEach(function(n,i){n.addEventListener("click",function(){e.ismove&&(e.lastindex=e.index,e.index=i,e.ismove=!1,utils.move(e.bannerOne,"left",""+-e.index*e.width,1e3,function(){e.ismove=!0}),s[e.lastindex].classList.remove("active"),n.classList.add("active"))})})}},{key:"nextClick",value:function(){var n=this;this.bannerPrev.addEventListener("click",function(){n.ismove&&(n.ismove=!1,n.lastindex=n.index,n.index--,n.index<0&&(n.index=n.bannerLis.length-2,n.bannerOne.style.left=-(n.bannerLis.length-1)*n.width+"px"),utils.move(n.bannerOne,"left",""+-n.index*n.width,1e3,function(){n.ismove=!0}),n.spans[n.lastindex].classList.remove("active"),n.spans[n.index].classList.add("active"))})}},{key:"autoPlay",value:function(){var n=this;clearInterval(this.timer),this.timer=setInterval(function(){n.prevFn()},3500)}},{key:"autoDie",value:function(){var n=this;this.banner.addEventListener("mouseover",function(){clearInterval(n.timer)})}},{key:"out",value:function(){var n=this;this.banner.addEventListener("mouseout",function(){n.autoPlay()})}},{key:"getPhp",value:function(){var o=this;this.rexiao.innerHTML='\n            <p class="shop_p">\n            热销推荐\n            <a href="">查看更多></a>\n            </p> \n            <div class="product"> </div>\n        ';var c=this.rexiao.querySelector(".product");$.ajax({type:"post",url:"./libs/cvcv.json",dataType:"json",success:function(n){for(var i=0;i<5;i++)c.innerHTML+='\n                    <div class="product_div">\n                    <a href="javascript:;"><img src="'+n[0].img+'" alt=""></a>\n                    <a href="javascript:;" class="a1">'+n[0].list+'</a>\n                    <p class="title">'+n[0].title+"</p>\n                    <h2>￥<span>"+n[0].price+'</span></h2>\n                    <div class="gouwu">\n                        <p>\n                            ￥<span>2299.00</span>\n                        </p>\n                        <h3 class="addgouwu" data-id="0">加入购物车</h3>\n                    </div>\n                    \n                   ';for(var e=0;e<7;e++){var s=document.createElement("div");s.className="shop",s.classList.add("banx"),s.innerHTML+='\n                        <p class="shop_tp">\n                        <span class="shoptp-sp">'+o.shopName[e]+'</span>\n                        <a href="javascript:;" class="shoptp_a">查看更多></a>\n                        </p>\n                    ';var a=document.createElement("div");a.className="shop_big";for(var t=0;t<4;t++)if(!(4==e&&0<t||5==e&&2<t)){if(6==e&&2<t){o.num=1;break}a.innerHTML+=0==t?'\n                                    \x3c!-- 第一个大盒子 --\x3e\n                                    <div class="bogshop">\n                                        <a href="javascript:;"><img src="'+n[o.num].img+'" alt="" class="shop_img"></a>\n                                        \x3c!-- 文字描述 --\x3e\n                                        <div class="bigshop_font">\n                                            <div class="font_t">\n                                                <span class="font_span left">'+n[o.num].list+'</span>\n                                                <a href="javascript:;" class="font_a right"><span>'+n[o.num].price+'</span></a>\n                                            </div>\n                                        </div>\n                                        <p class="font_p">'+n[o.num].title+'</p>\n                                        \x3c!-- 弹出购物车 --\x3e\n                                        <div class="shop_che">\n                                            <p class="che_p">\n                                                <span>'+n[o.num].price+'</span>\n                                            </p>\n                                            <div class="che_f addgouwu" data-id="'+o.num+'">加入购物车</div>\n                                        </div>\n                                    </div>\n                                ':'\n                                \x3c!-- 商品小盒子 --\x3e\n                                <div class="saml_shop">\n                                    \x3c!-- 图片 --\x3e\n                                    <a href="javascript:;"><img src="'+n[o.num].img+'"  class="saml_img"></a>\n                                    <a href="javascript:;" class="saml_ta">'+n[o.num].title+'</a>\n                                    <p class="saml_pt">'+n[o.num].list+'</p>\n                                    <p class="saml_price"><span>'+n[o.num].price+'</span></p>\n                                    \x3c!-- 弹出购物车 --\x3e\n                                    <div class="shop_che">\n                                        <p class="che_p">\n                                            <span>'+n[o.num].price+'</span>\n                                        </p>\n                                        <div class="che_f addgouwu " data-id="'+o.num+'">加入购物车</div>\n                                    </div>\n                                </div>\n                            ',o.num++}s.appendChild(a),o.main.appendChild(s)}$(".addgouwu").click(function(){utils.setCookie("dataId",""+$(this).attr("data-id"),{expires:2,path:"/"}),location.href="./html/xiangqing.html"})}})}},{key:"yiTiJi",value:function(){$(".yitibox").html('\n            <div class="yitij banx">一体机 <a href="">查看更多></a></div>\n            <p class="textnone banx">暂无数据</p>\n            \x3c!-- 精彩视频开始 --\x3e\n            <div class="videos banx">\n                <p class="jincai banx">精彩视频</p>\n                \x3c!-- 视频 --\x3e\n                <div class="video_v">\n                </div>         \n            </div>\n        ');for(var n=document.querySelector(".video_v"),i=0;i<4;i++)n.innerHTML+='\n            <div class="vi">\n            <div>\n                <img src="'+this.vidoArr[i].img+'" alt="">\n                <i class="iconfont icon-bofang"></i>\n            </div>\n            <h6>'+this.vidoArr[i].text+"</h6>\n            </div>\n          ";document.getElementById("video1");$(".closeVideo").click(function(){$(".playblck").css("display","none"),video1.currentTime=0}),document.querySelector(".closeVideo").onclick=function(){video1.pause()};var e=["http://img.coocaa.com/skyworth/video/skyworth.mp4","http://img.coocaa.com/skyworth/video/blue.mp4","http://img.coocaa.com/skyworth/video/aiot.mp4","http://img.coocaa.com/skyworth/huodong/20200308/H90.mp4"];$(".vi").click(function(){$(".playblck").css("display","block"),video1.src=e[$(this).index()]})}}]),n}();new Index,new Promise(function(i,n){$.ajax({type:"get",url:"./libs/all.json",dataType:"json",success:function(n){i(n)}})}).then(function(n){for(var a=[],i=0;i<n.length;i++){var e=n[i].list?n[i].list:n[i].title;a.push({title:e,id:i})}$("#tiaoJian").on("input",function(){$("#jsonp_ul").html("");var n=$(this).val();n?$("#jsonp_ul").css("display","block"):$("#jsonp_ul").css("display","none");for(var i=[],e=0;e<a.length;e++)-1!=a[e].title.indexOf(n)&&i.push(a[e]);for(var s=0;s<i.length;s++)$('<li data-num="'+i[s].id+'">'+i[s].title+"</li>").appendTo($("#jsonp_ul"))}),$("#jsonp_ul").on("click","li",function(){var n=$(this).text();$("#tiaoJian").val(n);var i=$(this).attr("data-num");utils.setCookie("dataId",i,{expires:7,path:"/"}),location.href="./html/xiangqing.html"}),document.documentElement.onclick=function(){$("#jsonp_ul").css("display","none")}});