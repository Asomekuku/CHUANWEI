"use strict";var thisnum=0;$('<div class="content banx"></div>').appendTo($(document.body)).css({minHeight:"122px",marginTop:"15px"}).html('\n    <div class="top"></div>\n    <div class="center"></div>\n    <div class="bottom"></div>\n'),$(".top").css({height:"50px",color:"#666"}).html('\n    <ul class="top_ul">\n        <li style="width:80px;">\n            <input type="checkbox" checked="checked" style="width:18px;height:18px;" class="selectAll">\n        </li>\n        <li style="width:535px;">商品信息</li>\n        <li style="width:130px;">单价</li>\n        <li style="width:120px;">数量</li>\n        <li style="width:140px;">金额</li>\n        <li style="width:164px;">操作</li>\n\n    </ul>\n'),$(".top_ul").css({display:"flex",height:"100%",alignItems:"center"}),$(".top_ul li").css({fontSize:"12px"}),$(".bottom").css({height:"56px",color:"#333",display:"flex",alignItems:"center",justifyContent:"space-between"}).html('\n    <a href="../index.html" style="margin-left:20px;color:#000;font-size:24px;">继续购物</a>\n    <div class="bottom_div">\n        <p>已选 <span class="bottom_span1">0</span>件 </p>\n        <p>共计￥ <span class="bottom_span2">0</span> </p>\n        <a href="" class="bottom_a">结算</a>\n    </div>\n    \n'),$(".bottom_a").click(function(){null==utils.getCookie("name")?$(this).attr("href","./sign.html"):$(this).attr("href","./dizhi.html")}),$(".bottom_div").css({display:"flex",justifyContent:"space-between",color:"#3c3c3c",width:"400px",alignItems:"center"}),$(".bottom_a").css({display:"block",width:"120px",height:"55px",backgroundColor:"#e83733",fontSize:"22px",color:"#fff",textAlign:"center",lineHeight:"55px"}),$(".bottom_span1").css({color:"#2e8ae3",fontSize:"16px"}),$(".bottom_span2").css({color:"#e83733",fontSize:"20px"}),$(".center").css({minHeight:"56px",color:"#666"});var data,status=!1,myajax=$.ajax({type:"post",url:"../libs/all.json",dataType:"json",success:function(t){status=!0,data=t}});function fn(){$.when(myajax).done(function(){if(status){for(var n=JSON.parse(utils.getCookie("goods")),t=0;t<n.length;t++){var e=data[n[t].id].list?data[n[t].id].list:data[n[t].id].title,i=data[n[t].id].ziduan?data[n[t].id].ziduan:data[n[t].id].title,l=(parseFloat(data[n[t].id].price.slice(1))*n[t].num).toFixed(2);$('<ul class="center_ul"></ul>').appendTo($(".center")).html('\n                        <li style="width:80px;">\n                        <input type="checkbox" checked="checked" style="width:18px;height:18px;" class="mutilInp">\n                        </li>\n                        <li style="width:535px;">\n                            <img src="'+data[n[t].id].img+'" alt="" class="centerUl_img">\n                            <div class="centerUl_jieshao">\n                                <a href="javascript:;" style="color:#333;">'+e+'</a>\n                                <p style="margin-top:10px;"> '+i+' </p>\n                                <p>配送公司：创维-RGB电子有限公司</p>\n                            </div>\n                        </li>\n                        <li style="width:130px;">\n                            <p style="color:#E83733;font-size:16px;"> '+data[n[t].id].price+' </p>\n                            <p style="text-decoration:line-through;color:#999;">'+data[n[t].id].price+'</p>\n                        </li>\n                        <li style="width:120px; display:flex;">\n                            <button class="centerUl_a centerUl_a1" id="'+n[t].id+'">-</button> <input type="text" class="centerUl_inp" value="'+n[t].num+'"></input> <button class="centerUl_a centerUl_a2" id="'+n[t].id+'">+</button>\n                        </li>\n                        <li style="width:140px;color:#E83733;font-size:14px;" id="priceid">￥<span class="priceZong">'+l+'</span></li>\n                        <li style="width:164px;" class="removeShop" data_id="'+n[t].id+'">移除商品</li>\n                    '),parseInt(l),baby()}$(".center_ul").css({height:"120px",display:"flex",boxSizing:"border-box",paddingTop:"20px",borderBottom:"1px solid #ccc"}),$(".center_ul li").css({fontSize:"12px"}),$(".centerUl_img").css({width:"90px",height:"90px",backgroundColor:"#333",float:"left"}),$(".centerUl_jieshao").css({width:"425px",height:"69px",float:"left",boxSizing:"border-box",paddingLeft:"20px"}),$(".centerUl_a").css({display:"inline-block",width:"20px",height:"27px",backgroundColor:"#f0f0f0",outline:"none",border:"1px solid #ccc"}),$(".centerUl_inp").css({width:"41px",height:"27px",outline:"none",textAlign:"center",lineHeight:"27px",border:"1px solid #ccc"}),$(".centerUl_a1").click(function(){var t=$(this).next().val();--t<1&&(t=1),$(this).next().val(t);for(var e,i=0;i<n.length;i++){$(this).attr("id")==n[i].id&&(e=(parseFloat(data[n[i].id].price.slice(1))*t).toFixed(2),$(this).parent().next().children().text(e),n[i].num=t,utils.setCookie("goods",JSON.stringify(n),{expires:7,path:"/"}))}baby()}),$(".centerUl_a2").click(function(){var t=$(this).prev().val();t++,$(this).prev().val(t);for(var e,i=0;i<n.length;i++){$(this).attr("id")==n[i].id&&(e=(parseFloat(data[n[i].id].price.slice(1))*t).toFixed(2),$(this).parent().next().children().text(e),n[i].num=t,utils.setCookie("goods",JSON.stringify(n),{expires:7,path:"/"}))}baby()}),$(".removeShop").click(function(){if(confirm("确定删除该商品吗")){for(var t=$(this).attr("data_id"),e=0;e<n.length;e++)t==n[e].id&&(n.splice(e,1),utils.setCookie("goods",JSON.stringify(n),{expires:7,path:"/"}));$(this).parent().remove(),baby()}}).css({cursor:"pointer"})}})}function select(){$(".selectAll").click(function(){thisnum=$(this).prop("checked")?($(".mutilInp").prop("checked","checked"),$(".mutilInp").length):($(".mutilInp").prop("checked",!1),0)})}function ff(){$.when(myajax).done(function(){status&&$(".mutilInp").click(function(){$(this).prop("checked")?thisnum++:thisnum--,thisnum==$(".mutilInp").length?$(".selectAll").prop("checked","checked"):$(".selectAll").prop("checked",!1)})})}function baby(){for(var t=$(".mutilInp"),e=0,i=0,n=0;n<t.length;n++){$(".mutilInp").eq(n).prop("checked")&&(e+=parseFloat($(".mutilInp").eq(n).parent().next().next().next().next().find("span").text()),i+=parseInt($(".mutilInp").eq(n).parent().next().next().next().find("input").val()))}$(".bottom_span2").text(e),$(".bottom_span1").text(i)}function total(){$(".center").on("click",".mutilInp",function(){baby()}),$(".selectAll").click(function(){baby()})}fn(),select(),ff(),total();